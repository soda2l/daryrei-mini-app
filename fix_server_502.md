# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 502 Bad Gateway

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

–°–µ—Ä–≤–µ—Ä nginx —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–æ—Ç—É. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
- nginx –∑–∞–ø—É—â–µ–Ω ‚úÖ
- –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç ‚ùå
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π nginx ‚ùå

## ‚úÖ –†–µ—à–µ–Ω–∏—è:

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@server

# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
sudo systemctl status daryrei-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
sudo systemctl restart daryrei-bot

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
sudo journalctl -u daryrei-bot -f
```

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx**
```bash
# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ nginx
sudo systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx
```

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã**
```bash
# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –±–æ—Ç —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 8000
netstat -tlnp | grep 8000

# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ –ø–æ—Ä—Ç 8000
cat /etc/nginx/sites-available/daryrei-bot
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### **–®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É**
```bash
ssh user@server
```

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞**
```bash
sudo systemctl status daryrei-bot
```

### **–®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞**
```bash
sudo systemctl restart daryrei-bot
```

### **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏**
```bash
sudo journalctl -u daryrei-bot --since "5 minutes ago"
```

### **–®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å API**
```bash
curl http://localhost:8000/api/catalog
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

### **–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
sudo chown -R www-data:www-data /var/www/daryrei-bot/
sudo chmod -R 755 /var/www/daryrei-bot/

# –ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd /var/www/daryrei-bot/
source venv/bin/activate
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é
python bot.py
```

### **–ï—Å–ª–∏ nginx –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat /etc/nginx/sites-available/daryrei-bot

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# location /api/ {
#     proxy_pass http://localhost:8000;
# }
```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å API
curl https://daryreibot.duckdns.org/api/catalog

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º
```

### **–í –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
- –ö–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- –¢–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ API —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å—Ç–∞—Ç—É—Å 200)
- ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ
- ‚úÖ Fallback –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ò—Å–ø—Ä–∞–≤—å –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** (–≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã—à–µ)
2. **–ü—Ä–æ–≤–µ—Ä—å API** - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ
4. **–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** —Å –Ω–æ–≤—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏

–ì–æ—Ç–æ–≤–æ! üéâ
